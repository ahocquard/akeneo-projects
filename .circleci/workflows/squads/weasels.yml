version: 2.1
workflows:
    version: 2

    weasels_workflow:
#        when:
#            matches:
#                pattern: "^tst.+$"
#                value: << pipeline.git.branch >>
        jobs:
            - launch_weasel?:
                  type: approval
                  filters:
                      branches:
                          only:
                              - /weasel.*/
            - all_tests_dqi:
                  requires:
                      - launch_weasel?
            - pull_request_success:
                  requires:
                      - all_tests_dqi
